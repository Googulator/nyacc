# Makefile.in for nyacc
#
# Copyright (C) 2017 Matthew R. Wette
#
# Copying and distribution of this file, with or without modification
# is granted.  This file is offered as-is, without any warranty.

GUILE=@guile@
SITE_SCM_DIR=@site_scm_dir@
SITE_SCM_GO_DIR=@site_scm_go_dir@
INFODIR=@infodir@

default: all

all:
	@echo "nothing to make"

.PHONY: install
install:
	@(cd module; \
	 make -f Makefile.nyacc GUILE=$(GUILE) \
		 SITE_SCM_DIR=$(SITE_SCM_DIR) \
		 SITE_SCM_GO_DIR=$(SITE_SCM_GO_DIR) \
		 install)
	@(cd doc/nyacc; \
	 make -f Makefile.nyacc GUILE=$(GUILE) \
		 INFODIR=$(INFODIR) \
		 install)

.PHONY: install-srcs
install-srcs:
	@(cd module; \
	 make -f Makefile.nyacc \
		 SITE_SCM_DIR=$(SITE_SCM_DIR) \
		 install-srcs)

.PHONY: install-ffi-help
install-ffi-help:
	@(cd examples; \
	 make -f Makefile.nyacc \
		 SITE_SCM_DIR=$(SITE_SCM_DIR) \
		 SITE_SCM_GO_DIR=$(SITE_SCM_GO_DIR) \
		 INFODIR=$(INFODIR) \
		 install-ffi-help)

.PHONY: dist-files
dist-files:
	(cd module; make -f Makefile.nyacc dist-files)
	(cd doc/nyacc; make -f Makefile.nyacc dist-files)
	(cd examples; make -f Makefile.nyacc dist-files)

.PHONY: check
check:
	(cd test-suite/nyacc; make -f Makefile.nyacc check)

# --- last line ---
